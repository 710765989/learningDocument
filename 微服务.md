# 雪花算法

![](img\雪花算法.png)

- 第一部分：1bit 0，无意义
  - 作为正负标记位，生成的id都是正数，因此统一都是0
- 第二部分：41bit表示时间戳
  - 41bit可以表示2^41-1，换算成年是69年
  - (1L<<41) / (1000L * 60 * 60 * 24 * 365) = 69
- 第三部分：5bit表示机房id
  - 2^5（32）个机房
- 第四部分：5bit表示机器id
  - 2^5（32）台机器
- 第五部分：12bit表示序号，某台机器在一毫秒内同时生成的id序列号
  - 2^12-1=4096，同一毫秒内最多4096个不同id